type: spec.insomnia.rest/5.0
name: account-service
meta:
  id: wrk_5ba79f58d14b4a2da0a48e86ddcc5c24
  created: 1752836281005
  modified: 1752836281005
  description: ""
collection:
  - name: accounts
    meta:
      id: fld_ff1c3c80985f4d3e9fc193ebc5733860
      created: 1753112420430
      modified: 1753112761420
      sortKey: -1753112420430
      description: Accounts endpoints
    children:
      - url: "{{ _.base_url }}/accounts"
        name: Create account
        meta:
          id: req_9d19a90e32e545d2ac2abbb1ba252e87
          created: 1753112420431
          modified: 1753112991442
          isPrivate: false
          description: Creates a new account with an initial balance. The account ID is
            automatically generated.
          sortKey: -1753112420431
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
              "type": "savings",
              "initial_balance": 10000
            }
        headers:
          - name: Content-Type
            disabled: false
            value: application/json
        scripts:
          afterResponse: |-
            let data=insomnia.response.json();
            insomnia.environment.set("account_id", data.account_id); 
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/accounts/{{ _.account_id }}"
        name: Delete account
        meta:
          id: req_0c511ebc3a5d429f8d75a87cd0f8b74d
          created: 1753112420432
          modified: 1753112420432
          isPrivate: false
          description: Deletes an account based on id
          sortKey: -1753112420432
        method: DELETE
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/accounts/{{ _.account_id }}"
        name: get account details
        meta:
          id: req_165be711624144b688d07a13b66b96cc
          created: 1753112420432
          modified: 1753112420432
          isPrivate: false
          description: get an account based on id
          sortKey: -1753112420432
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/accounts/{{ _.account_id }}/debit"
        name: debit account
        meta:
          id: req_da86e6967e584b12bd9c4ddc545b2c6b
          created: 1753112420433
          modified: 1753112952898
          isPrivate: false
          description: Deletes an account based on id
          sortKey: -1753112420433
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"amount": 100
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/accounts/{{ _.account_id }}/credit"
        name: credit account
        meta:
          id: req_6d260e7243d74aa3b714219e4aacc007
          created: 1753112420434
          modified: 1753112961413
          isPrivate: false
          description: credits an account based on id
          sortKey: -1753112420434
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"amount": 100
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
  - name: health
    meta:
      id: fld_09ae818bee5b4cf7b9e1c4b8d8ec0cc5
      created: 1753112420431
      modified: 1753112420431
      sortKey: -1753112420431
      description: health check
    children:
      - url: "{{ _.base_url }}/health"
        name: health check
        meta:
          id: req_e9fc5c1915f049e59d72cb7062ad6e64
          created: 1753112420434
          modified: 1753112420434
          isPrivate: false
          description: healtch check
          sortKey: -1753112420434
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
cookieJar:
  name: Default Jar
  meta:
    id: jar_3282cf868fcd86dfe3290cbf99cf4765c9480ad4
    created: 1752836281009
    modified: 1753112761419
environments:
  name: Base Environment
  meta:
    id: env_3282cf868fcd86dfe3290cbf99cf4765c9480ad4
    created: 1752836281009
    modified: 1753112761420
    isPrivate: false
  data:
    base_url: "{{ _.scheme }}://{{ _.host }}{{ _.base_path }}"
  subEnvironments:
    - name: OpenAPI env localhost:8081
      meta:
        id: env_8e521ea4316e42a8be16cd96af86abdf
        created: 1753112420429
        modified: 1753112761419
        isPrivate: false
        sortKey: 1753112420430
      data:
        scheme: http
        base_path: ""
        host: localhost:8081
        accountId: cbbd2ec6-a463-4258-a819-8fa276ee0d50
        account_id: f867f4ea-6c34-4d1f-b378-72acb1d5c0cb
spec:
  contents:
    openapi: 3.0.3
    info:
      title: Accounts API
      version: 1.0.0
      description: This API manages account information and balances.
      contact:
        email: stephen.brown@konghq.com
    servers:
      - url: http://localhost:8081
        description: Local development server
    paths:
      /accounts:
        post:
          tags:
            - accounts
          summary: Create account
          description: Creates a new account with an initial balance. The account ID is
            automatically generated.
          operationId: createAccount
          requestBody:
            description: Details of the new account
            required: true
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/CreateAccountRequest"
                examples:
                  savings_account:
                    summary: Savings account example
                    value:
                      type: savings
                      initial_balance: 5000
          responses:
            "201":
              description: Account created successfully
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/Account"
                  examples:
                    created_account:
                      summary: Created account
                      value:
                        account_id: 123e4567-e89b-12d3-a456-426614174000
                        type: savings
                        balance: 5000
      /accounts/{account_id}:
        delete:
          tags:
            - accounts
          summary: Delete account
          description: Deletes an account based on id
          operationId: deleteAccount
          parameters:
            - name: account_id
              in: path
              required: true
              schema:
                type: string
          responses:
            "204":
              description: Account deleted successfully
        get:
          tags:
            - accounts
          summary: get account details
          description: get an account based on id
          operationId: getAccount
          parameters:
            - name: account_id
              in: path
              required: true
              schema:
                type: string
          responses:
            "200":
              description: Account details
      /accounts/{account_id}/debit:
        post:
          tags:
            - accounts
          summary: debit account
          description: Deletes an account based on id
          operationId: debitAccount
          parameters:
            - name: account_id
              in: path
              required: true
              schema:
                type: string
          responses:
            "200":
              description: Account debited successfully
      /accounts/{account_id}/credit:
        post:
          tags:
            - accounts
          summary: credit account
          description: credits an account based on id
          operationId: creditAccount
          parameters:
            - name: account_id
              in: path
              required: true
              schema:
                type: string
          responses:
            "200":
              description: Account credited successfully
      /health:
        get:
          tags:
            - health
          summary: health check
          description: healtch check
          operationId: healtCheck
          responses:
            "200":
              description: Account credited successfully
    components:
      schemas:
        CreateAccountRequest:
          type: object
          required:
            - type
            - initial_balance
          properties:
            type:
              type: string
              description: Type of account (e.g. checking, savings)
            initial_balance:
              type: number
              format: double
              description: Initial deposit amount
        Account:
          type: object
          properties:
            account_id:
              type: string
              format: uuid
            type:
              type: string
            balance:
              type: number
    tags:
      - name: accounts
        description: Accounts endpoints
      - name: health
        description: health check
  meta:
    id: spc_e6cdb6ab3b3247ef892f72f0643aa066
    created: 1752836281008
    modified: 1753112391458
testSuites:
  - name: Accounts API Test Suite
    meta:
      id: uts_bb1f5b192a034c5fb8756048dcad5157
      created: 1752938240764
      modified: 1752938254731
      sortKey: -1752938240764
    tests:
      - name: Returns 200
        meta:
          id: ut_813427d0b4ea460a8c1f31b63e90b722
          created: 1752938296216
          modified: 1752938347771
          sortKey: -1752938296216
        code: |-
          const response = await insomnia.send();
          expect(response.status).to.equal(201);
          const account = JSON.parse(response.data);
          expect(account).to.have.property('account_id').that.is.a('string');
          expect(account).to.have.property('type').that.is.a('string');
          expect(account).to.have.property('balance').that.is.a('number');
